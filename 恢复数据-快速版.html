<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿«é€Ÿæ•°æ®æ¢å¤</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
        }

        button {
            padding: 15px 30px;
            margin: 10px 5px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-success:hover {
            background: #229954;
            transform: translateY(-2px);
        }

        .result {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
            border-left: 4px solid #3498db;
        }

        .success {
            border-left-color: #27ae60;
        }

        .error {
            border-left-color: #e74c3c;
        }

        .warning {
            border-left-color: #f39c12;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ğŸ”§ PETè‹±è¯­å±‹å¿«é€Ÿæ•°æ®æ¢å¤</h1>

        <button class="btn-primary" onclick="checkData()">1ï¸âƒ£ æ£€æŸ¥å½“å‰æ•°æ®</button>
        <button class="btn-success" onclick="restoreData()">2ï¸âƒ£ æ¢å¤å†…ç½®æ•°æ®</button>

        <div id="result" class="result" style="display: none;"></div>
    </div>

    <script src="src/pet-content.js"></script>
    <script>
        function showResult(text, type = '') {
            const result = document.getElementById('result');
            result.style.display = 'block';
            result.className = 'result ' + type;
            result.textContent = text;
        }

        function checkData() {
            try {
                const petData = localStorage.getItem('petEnglishData');

                if (petData) {
                    const parsed = JSON.parse(petData);
                    const stats = {
                        'å•è¯æ•°é‡': parsed.vocab?.length || 0,
                        'é˜…è¯»é¢˜æ•°é‡': parsed.readingSets?.length || 0,
                        'å›ºå®šæ­é…æ•°é‡': parsed.collocationSets?.length || 0,
                        'å®Œå½¢é¢˜æ•°é‡': parsed.clozeSets?.length || 0
                    };

                    showResult(`âœ… æ‰¾åˆ°æ•°æ®\n\nç»Ÿè®¡ï¼š\n${JSON.stringify(stats, null, 2)}\n\næ•°æ®å¤§å°ï¼š${(petData.length / 1024).toFixed(2)} KB`, 'success');
                } else {
                    showResult('âš ï¸ æ²¡æœ‰æ‰¾åˆ°æ•°æ®\n\nlocalStorageä¸­æ²¡æœ‰petEnglishDataé”®ã€‚', 'warning');
                }
            } catch (e) {
                showResult(`âŒ æ£€æŸ¥å¤±è´¥\n\né”™è¯¯: ${e.message}`, 'error');
            }
        }

        function restoreData() {
            try {
                setTimeout(() => {
                    if (!window.petContent) {
                        showResult('âŒ å†…ç½®æ•°æ®åŠ è½½å¤±è´¥\n\næ— æ³•æ‰¾åˆ°window.petContentå¯¹è±¡ã€‚', 'error');
                        return;
                    }

                    const builtInData = {
                        vocab: window.petContent.vocab || [],
                        readingSets: window.petContent.readingSets || [],
                        collocationSets: window.petContent.collocationSets || [],
                        clozeSets: window.petContent.clozeSets || []
                    };

                    const stats = {
                        'å•è¯': builtInData.vocab.length,
                        'é˜…è¯»': builtInData.readingSets.length,
                        'å›ºå®šæ­é…': builtInData.collocationSets.length,
                        'å®Œå½¢': builtInData.clozeSets.length
                    };

                    localStorage.setItem('petEnglishData', JSON.stringify(builtInData));

                    showResult(`âœ… æ•°æ®æ¢å¤æˆåŠŸï¼\n\næ¢å¤ç»Ÿè®¡ï¼š\n${JSON.stringify(stats, null, 2)}\n\næ•°æ®å¤§å°ï¼š${(JSON.stringify(builtInData).length / 1024).toFixed(2)} KB\n\nç°åœ¨å¯ä»¥æ‰“å¼€ src/index.html æŸ¥çœ‹æ¢å¤åçš„æ•°æ®ã€‚`, 'success');
                }, 500);
            } catch (e) {
                showResult(`âŒ æ¢å¤å¤±è´¥\n\né”™è¯¯: ${e.message}`, 'error');
            }
        }
    </script>
</body>

</html>